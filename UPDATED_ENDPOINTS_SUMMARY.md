# –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ Endpoints - –ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

–í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ endpoints —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç **–ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** –≤–º–µ—Å—Ç–æ —Ç–æ–ª—å–∫–æ –∏–º–µ–Ω.

---

## üìã –ú–µ–Ω—é (Menu)

### GET /menu

**–ë—ã–ª–æ:**
```json
{
  "success": true,
  "message": "got menu",
  "items": [
    {
      "name": "–ì—Ä—É–∑–∏–Ω—Å–∫–∏–π –æ–±–µ–¥"
    }
  ]
}
```

**–°—Ç–∞–ª–æ:**
```json
{
  "success": true,
  "message": "got menu",
  "items": [
    {
      "id": 1,
      "iiko_id": "abc123",
      "name": "–ì—Ä—É–∑–∏–Ω—Å–∫–∏–π –æ–±–µ–¥",
      "description": "–í–∫—É—Å–Ω—ã–π –≥—Ä—É–∑–∏–Ω—Å–∫–∏–π –æ–±–µ–¥",
      "code": "GRU001",
      "price": 2500.00,
      "organization_id": 1,
      "category_id": 5,
      "menu_category_id": 3,
      "product_group_id": 2,
      "weight": 350.0,
      "energy_amount": 650.5,
      "proteins_amount": 25.3,
      "fats_amount": 18.7,
      "carbohydrates_amount": 85.2,
      "type": "dish",
      "measure_unit": "–ø–æ—Ä—Ü–∏—è",
      "deleted": false
    }
  ]
}
```

**–ù–æ–≤—ã–µ –ø–æ–ª—è:**
- `id` - ID –±–ª—é–¥–∞ –≤ –ë–î
- `iiko_id` - ID –∏–∑ iiko
- `description` - –æ–ø–∏—Å–∞–Ω–∏–µ –±–ª—é–¥–∞
- `code` - –∫–æ–¥ –±–ª—é–¥–∞
- `price` - —Ü–µ–Ω–∞
- `organization_id` - ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- `category_id`, `menu_category_id`, `product_group_id` - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `weight` - –≤–µ—Å (–≥—Ä–∞–º–º—ã)
- `energy_amount` - –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å
- `proteins_amount` - –±–µ–ª–∫–∏
- `fats_amount` - –∂–∏—Ä—ã
- `carbohydrates_amount` - —É–≥–ª–µ–≤–æ–¥—ã
- `type` - —Ç–∏–ø –±–ª—é–¥–∞
- `measure_unit` - –µ–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è
- `deleted` - —É–¥–∞–ª–µ–Ω–æ –ª–∏

---

## üë• –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ (Employees)

### GET /employees

**–ë—ã–ª–æ:**
```json
{
  "success": true,
  "message": "got employees",
  "employees": [
    {
      "id": 1,
      "iiko_id": "emp123",
      "name": "–ê—Å–ª–∞–Ω –ê–º–∞–Ω–æ–≤",
      "login": "aslan",
      "first_name": "–ê—Å–ª–∞–Ω",
      "last_name": "–ê–º–∞–Ω–æ–≤",
      "phone": "+7 777 123 4567",
      "email": "aslan@example.com",
      "main_role_code": "waiter",
      "preferred_organization_id": 1,
      "deleted": false
    }
  ]
}
```

**–°—Ç–∞–ª–æ:**
```json
{
  "success": true,
  "message": "got employees",
  "employees": [
    {
      "id": 1,
      "iiko_id": "emp123",
      "name": "–ê—Å–ª–∞–Ω –ê–º–∞–Ω–æ–≤",
      "login": "aslan",
      "first_name": "–ê—Å–ª–∞–Ω",
      "middle_name": "–ë–µ–∫–æ–≤–∏—á",
      "last_name": "–ê–º–∞–Ω–æ–≤",
      "phone": "+7 777 123 4567",
      "cell_phone": "+7 707 123 4567",
      "email": "aslan@example.com",
      "address": "–≥. –ê–ª–º–∞—Ç—ã, —É–ª. –ê–±–∞—è 150",
      "main_role_code": "waiter",
      "role_codes": ["waiter", "cashier"],
      "preferred_organization_id": 1,
      "organizations_id": [1, 2],
      "hire_date": "2023-01-15",
      "fire_date": null,
      "birthday": "1995-05-20",
      "code": "EMP001",
      "card_number": "1234567890",
      "taxpayer_id_number": "123456789012",
      "deleted": false
    }
  ]
}
```

**–ù–æ–≤—ã–µ –ø–æ–ª—è:**
- `middle_name` - –æ—Ç—á–µ—Å—Ç–≤–æ
- `cell_phone` - –º–æ–±–∏–ª—å–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω
- `address` - –∞–¥—Ä–µ—Å
- `role_codes` - –º–∞—Å—Å–∏–≤ –∫–æ–¥–æ–≤ —Ä–æ–ª–µ–π
- `organizations_id` - –º–∞—Å—Å–∏–≤ ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
- `hire_date` - –¥–∞—Ç–∞ –Ω–∞–π–º–∞
- `fire_date` - –¥–∞—Ç–∞ —É–≤–æ–ª—å–Ω–µ–Ω–∏—è
- `birthday` - –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è
- `code` - –∫–æ–¥ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- `card_number` - –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã
- `taxpayer_id_number` - –ò–ù–ù

---

## üì¶ –ó–∞–∫–∞–∑—ã (Orders)

### GET /orders

**–ë—ã–ª–æ:**
```json
{
  "success": true,
  "message": "got orders",
  "orders": [
    {
      "name": "1"
    }
  ]
}
```

**–°—Ç–∞–ª–æ:**
```json
{
  "success": true,
  "message": "got orders",
  "orders": [
    {
      "id": 1,
      "iiko_id": "order123",
      "organization_id": 1,
      "terminal_group_id": 2,
      "order_type_id": 1,
      "external_number": "ORD-001",
      "phone": "+7 777 123 4567",
      "guest_count": 4,
      "tab_name": "–°—Ç–æ–ª 5",
      "sum_order": 15800.00,
      "discount": 1000.00,
      "service": 1580.00,
      "bank_commission": 158.00,
      "state_order": "closed",
      "time_order": "2025-01-15T14:30:00",
      "user_id": 3,
      "customer": {
        "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
        "phone": "+7 777 123 4567"
      },
      "items": [...],
      "payments": [
        {
          "type": "card",
          "amount": 15800
        }
      ],
      "tips": {
        "amount": 500
      },
      "order_items": [
        {
          "id": 101,
          "item_id": 25,
          "item_name": "–¶–µ–∑–∞—Ä—å",
          "count": 2,
          "price": 2500.00,
          "comment": "–ë–µ–∑ —Å—É—Ö–∞—Ä–∏–∫–æ–≤"
        },
        {
          "id": 102,
          "item_id": 30,
          "item_name": "–•–∏–Ω–∫–∞–ª–∏",
          "count": 10,
          "price": 350.00,
          "comment": null
        }
      ],
      "deleted": false
    }
  ]
}
```

**–ù–æ–≤—ã–µ –ø–æ–ª—è:**
- `id` - ID –∑–∞–∫–∞–∑–∞
- `iiko_id` - ID –∏–∑ iiko
- `organization_id` - ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- `terminal_group_id` - ID –≥—Ä—É–ø–ø—ã —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤
- `order_type_id` - ID —Ç–∏–ø–∞ –∑–∞–∫–∞–∑–∞
- `external_number` - –≤–Ω–µ—à–Ω–∏–π –Ω–æ–º–µ—Ä
- `phone` - —Ç–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞
- `guest_count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π
- `tab_name` - –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—á–µ—Ç–∞ (—Å—Ç–æ–ª)
- `sum_order` - —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞
- `discount` - —Å–∫–∏–¥–∫–∞
- `service` - —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–±–æ—Ä
- `bank_commission` - –∫–æ–º–∏—Å—Å–∏—è –±–∞–Ω–∫–∞
- `state_order` - —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞
- `time_order` - –≤—Ä–µ–º—è –∑–∞–∫–∞–∑–∞
- `user_id` - ID –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–∞
- `customer` - –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞ (JSON)
- `items` - –±–ª—é–¥–∞ (JSON –∏–∑ iiko)
- `payments` - –ø–ª–∞—Ç–µ–∂–∏ (JSON)
- `tips` - —á–∞–µ–≤—ã–µ (JSON)
- `order_items` - **–¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫–∞–∑–∞**:
  - `id` - ID –ø–æ–∑–∏—Ü–∏–∏
  - `item_id` - ID –±–ª—é–¥–∞
  - `item_name` - –Ω–∞–∑–≤–∞–Ω–∏–µ –±–ª—é–¥–∞
  - `count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
  - `price` - —Ü–µ–Ω–∞ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É
  - `comment` - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –ø–æ–∑–∏—Ü–∏–∏
- `deleted` - —É–¥–∞–ª–µ–Ω –ª–∏

---

## üîç –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

### –ú–µ–Ω—é
```javascript
// –ü–æ–ª—É—á–∏—Ç—å –º–µ–Ω—é
const response = await api.get('/menu', {
  params: {
    organization_id: 1,
    category_id: 5,
    limit: 50
  }
});

// –¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
response.data.items.forEach(item => {
  console.log(`${item.name} - ${item.price} —Ç–≥`);
  console.log(`–ö–∞–ª–æ—Ä–∏–∏: ${item.energy_amount}`);
  console.log(`–í–µ—Å: ${item.weight}–≥`);
});
```

### –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
```javascript
// –ü–æ–ª—É—á–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
const response = await api.get('/employees', {
  params: {
    organization_id: 1,
    role_code: 'waiter'
  }
});

// –¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
response.data.employees.forEach(emp => {
  console.log(`${emp.name} (${emp.code})`);
  console.log(`–¢–µ–ª–µ—Ñ–æ–Ω: ${emp.phone}`);
  console.log(`Email: ${emp.email}`);
  console.log(`–†–æ–ª–∏: ${emp.role_codes.join(', ')}`);
  console.log(`–î–∞—Ç–∞ –Ω–∞–π–º–∞: ${emp.hire_date}`);
});
```

### –ó–∞–∫–∞–∑—ã
```javascript
// –ü–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑—ã
const response = await api.get('/orders', {
  params: {
    organization_id: 1,
    state: 'closed',
    limit: 20
  }
});

// –¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
response.data.orders.forEach(order => {
  console.log(`–ó–∞–∫–∞–∑ #${order.external_number}`);
  console.log(`–°—É–º–º–∞: ${order.sum_order} —Ç–≥`);
  console.log(`–ì–æ—Å—Ç–µ–π: ${order.guest_count}`);
  console.log(`–°—Ç–æ–ª: ${order.tab_name}`);
  
  // –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫–∞–∑–∞
  order.order_items.forEach(item => {
    console.log(`  - ${item.item_name} x${item.count} = ${item.price * item.count} —Ç–≥`);
  });
});
```

---

## üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| Endpoint | –ë—ã–ª–æ –ø–æ–ª–µ–π | –°—Ç–∞–ª–æ –ø–æ–ª–µ–π | –£–ª—É—á—à–µ–Ω–∏–µ |
|----------|-----------|-------------|-----------|
| GET /menu | 1 | 16 | +1500% |
| GET /employees | 11 | 21 | +91% |
| GET /orders | 1 | 20+ | +1900% |

---

## ‚ú® –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **Orders** —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞—é—Ç –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ (`order_items`) —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –±–ª—é–¥
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `joinedload` –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

### 2. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
- –í—Å–µ —á–∏—Å–ª–æ–≤—ã–µ –ø–æ–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ `float`
- –î–∞—Ç—ã –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ ISO —Ñ–æ—Ä–º–∞—Ç
- JSON –ø–æ–ª—è –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å

### 3. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
- –í—Å–µ –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å `null`, –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ `Optional`
- –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É —Å –Ω–µ–ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

---

## üéØ –ß—Ç–æ —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

### –ú–µ–Ω—é
‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–ª—é–¥–µ  
‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å –∏ –ë–ñ–£  
‚úÖ –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º  
‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Ü–µ–Ω—ã –∏ –≤–µ—Å  

### –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –∫–æ–Ω—Ç–∞–∫—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é  
‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –≤—Å–µ —Ä–æ–ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞  
‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–∞—Ç—ã –Ω–∞–π–º–∞ –∏ —É–≤–æ–ª—å–Ω–µ–Ω–∏—è  
‚úÖ –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º  

### –ó–∞–∫–∞–∑—ã
‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é –∑–∞–∫–∞–∑–∞  
‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏ —Å —Ü–µ–Ω–∞–º–∏  
‚úÖ –†–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –∏—Ç–æ–≥–æ–≤—ã–µ —Å—É–º–º—ã  
‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–ª–∏–µ–Ω—Ç–µ  
‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã  

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–í—Å–µ endpoints —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º.

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
```bash
python test_new_api_endpoints.py
```

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞: `API_FRONTEND_GUIDE.md`

